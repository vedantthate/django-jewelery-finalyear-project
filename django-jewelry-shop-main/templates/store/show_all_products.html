{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container-fluid px-0">
 <!-- All PRODUCTS -->
  <section class="py-5">
    <div class="container">
      <header class="text-center mb-5">
        {% comment %} <p class="text-uppercase text-muted small">Crafted With Care</p> {% endcomment %}
        <h2 class="fw-bold text-uppercase">All Products</h2>
      </header>
      <div class="row g-4">
          {% for product in products %}
            <div class="col-xl-3 col-lg-4 col-sm-6 mb-3">
              <div 
                class="card h-100 border-0 shadow product-card p-2 rounded" 
                style="cursor: pointer;"
                onclick="window.location.href='{% url 'store:product-detail' product.slug %}'"
              >
                <div class="position-relative">
                  <a href="{% url 'store:product-detail' product.slug %}">
                    {% if product.product_image %}
                      <img src="{{ product.product_image.url }}" alt="{{ product.title }}" class="card-img-top rounded" style="height: 250px; object-fit: cover;">
                    {% else %}
                      <img src="{% static 'img/product-1.jpg' %}" alt="{{ product.title }}" class="card-img-top rounded" style="height: 250px; object-fit: cover;">
                    {% endif %}
                  </a>
                  <div class="product-overlay">
                    <a href="{% url 'store:add-to-wishlist' product.id %}" class="btn btn-outline-danger btn-sm" title="Add to Wishlist" onclick="event.stopPropagation();">
                      <i class="far fa-heart"></i>
                    </a>
                    <form action="{% url 'store:add-to-cart' %}" method="get" class="m-0 d-inline" onclick="event.stopPropagation();">
                      <input type="hidden" name="prod_id" value="{{ product.id }}">
                      <button type="submit" class="btn btn-dark btn-sm">Add to Cart</button>
                    </form>
                  </div>
                </div>
                <div class="card-body text-center pt-2">
                  <h6 class="card-title mb-1">
                    <a href="{% url 'store:product-detail' product.slug %}" class="text-decoration-none text-dark" onclick="event.stopPropagation();">{{ product.title }}</a>
                  </h6>
                  <p class="text-muted mb-0 fw-semibold">â‚¹{{ product.price }}</p>
                </div>
              </div>
            </div>
          {% endfor %}
      </div>
     
    </div>
  </section>

</div>



<!-- Custom CSS -->
<style>
  .product-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    opacity: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    transition: 0.3s ease-in-out;
  }
  .product-card:hover .product-overlay {
    opacity: 1;
  }
    
</style>

{% endblock content %}
